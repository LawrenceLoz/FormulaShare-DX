<template>

    <h3 class="slds-section-title--divider ">Rule name</h3>
    <c-formula-share-rule-detail-name-label
        rule-name={rule.developerName}
        rule-label={rule.label}
        rule-description={rule.description}
        rule-active={rule.active}
        is-edit={isEdit}
        onlabelchange={handleLabelChange}
        onnamechange={handleNameChange}
        ondescriptionchange={handleDescriptionChange}
        onactivechange={handleActiveChange}>
    </c-formula-share-rule-detail-name-label>

    <h3 class="slds-section-title--divider ">Object to share</h3>
    <c-formula-share-rule-detail-shared-object 
        shared-object-api-name={rule.objectSharedAPIName}
        onsetsharedobjectdetail={handleSetSharedObjectDetail}
        onsharedobjectchange={handleSharedObjectChange}
        onaccountrelatedowd={handleSetAccountRelatedOwd}
        >
    </c-formula-share-rule-detail-shared-object>

    <template if:true={rule.relationship}>
        <div class="slds-p-top_medium">
            <h3 class="slds-section-title--divider">Location of field with user, role or group</h3>
<!--
            related-object-selected={rule.controllingObjectApiName}
            rule-type={rule.type} 
            shared-object={sharedObject}
            shared-object-api-name={rule.objectSharedAPIName}
            onrelatedobjectchange={handleRelatedObjectChange}
-->
            <c-formula-share-rule-detail-location 
                relationship={rule.relationship}
                onrelationshipchange={handleRelationshipChange}>
            </c-formula-share-rule-detail-location>
        </div>
    </template>

    <template if:true={sharedObject}>
        <h3 class="slds-section-title--divider">Share with</h3>
        <c-formula-share-rule-detail-field 
            object-with-share-field={rule.controllingObjectApiName}
            share-with={rule.shareWith}
            internal-sharing-model={sharedObject.internalSharingModel}
            external-sharing-model={sharedObject.externalSharingModel}
            share-field={rule.controllingObjectSharedToFieldAPIName}
            share-field-type={rule.controllingObjectSharedToFieldType}
            onsharewithchange={handleShareWithChange}
            onsharefieldchange={handleShareFieldChange}
            onsharefieldtypechange={handleShareFieldTypeChange}>
        </c-formula-share-rule-detail-field>
    </template>

    <template if:true={sharedObject}>
        <h3 class="slds-section-title--divider">Sharing provided</h3>
        <c-formula-share-rule-detail-access 
            internal-sharing-model={sharedObject.internalSharingModel}
            external-sharing-model={sharedObject.externalSharingModel}
            account-related-owd={accountRelatedOwd}
            is-custom={sharedObject.isCustom}
            shared-object-id={sharedObject.objectId}
            shared-object-label={sharedObject.objectLabel}
            shared-object-api-name={sharedObjectApiName}
            access-level={rule.accessLevel}
            contact-access={rule.contactAccess}
            case-access={rule.caseAccess}
            opportunity-access={rule.opportunityAccess}
            sharing-reason={rule.sharingReason}
            onaccesslevelchange={handleAccessLevelChange}
            onsharingreasonchange={handleSharingReasonChange}
            oncontactaccesschange={handleContactAccessChange}
            oncaseaccesschange={handleCaseAccessChange}
            onopportunityaccesschange={handleOpportunityAccessChange}
            >
        </c-formula-share-rule-detail-access>            
    </template>

</template>