<template>
    <fieldset class="slds-form-element">
        <div class="slds-p-horizontal_small slds-p-bottom_small">
            <div class="slds-form-element__control">
            <div class="slds-grid slds-gutters"
                id="buttonSet">
                <div class="slds-col slds-size_1-of-2 slds-var-p-horizonal_medium slds-var-p-vertical_small">

                    <div class="slds-visual-picker">

                        <input 
                            type="radio" 
                            id="standard"
                            value="standard"
                            name="ruleType"
                            checked={fieldIsOnThisObject} 
                            onclick={handleSelectedThisObject} />
                        <label for="standard">
                            <span class="slds-visual-picker__figure slds-visual-picker__text slds-align_absolute-center">

                                <div class="slds-media slds-media_center">
                                    <span class="slds-media__figure slds-media__figure_fixed-width slds-align_absolute-center slds-m-left_medium">     
                                        <lightning-icon icon-name="standard:contact_list" alternative-text="Standard" title="Standard" size="medium"></lightning-icon>
                                    </span>
                                    <span class="slds-media__body slds-border_left slds-p-around_small slds-text-align_left">
                                        <h2 class="slds-truncate slds-text-heading_small" title="The Object">The {_relationship.thisObjectLabel} Object</h2>
                                        <p class="slds-m-top_small">{_relationship.thisObjectLabel} records will be shared to the user, role or group specified in a field on each record</p>
                                    </span>
                                </div>

                            </span>
                            <span class="slds-icon_container slds-visual-picker__text-check">
                                <lightning-icon class="slds-icon slds-icon-text-check slds-icon_x-small" 
                                    icon-name="utility:check" 
                                    size="x-small"
                                    variant="inverse"
                                    alternative-text="Check" 
                                    title="Check">
                                </lightning-icon>
                            </span>
                        </label>
                    </div>
                </div>

                <div class="slds-col slds-size_1-of-2 slds-var-p-horizonal_medium slds-var-p-vertical_small">
                    <div class="slds-visual-picker">
                        <input 
                            type="radio" 
                            id="related" 
                            value="related" 
                            name="ruleType" 
                            checked={fieldIsOnRelatedObject} 
                            onclick={handleSelectedRelatedObject} />
                        <label for="related">
                            <span class="slds-visual-picker__figure slds-visual-picker__text slds-align_absolute-center">

                                <div class="slds-media slds-media_center">
                                    <span class="slds-media__figure slds-media__figure_fixed-width slds-align_absolute-center slds-m-left_medium">
                                        <lightning-icon icon-name="standard:hierarchy" alternative-text="Related" title="Related" size="medium"></lightning-icon>
                                    </span>
                                    <span class="slds-media__body slds-border_left slds-p-around_small slds-text-align_left">
                                        <h2 class="slds-truncate slds-text-heading_small" title="A Related Object">A Related Object</h2>
                                        <p class="slds-m-top_small">{_relationship.thisObjectLabel} records will be shared to the users, roles or groups specified in a field on related records</p>
                                    </span>
                                </div>

                            </span>
                            <span class="slds-icon_container slds-visual-picker__text-check">
                                <lightning-icon class="slds-icon slds-icon-text-check slds-icon_x-small" 
                                    icon-name="utility:check" 
                                    size="x-small"
                                    variant="inverse"
                                    alternative-text="Check" 
                                    title="Check">
                                </lightning-icon>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </fieldset>

    <template if:true={fieldIsOnRelatedObject}>
        <c-formula-share-relationship-object 
            relationship={_relationship}
            traverse={initialTraverse}
            onrelationshipchange={handleRelationshipChange}
            onaddrelationshipcancelled={handleAddRelationshipCancelled}>
        </c-formula-share-relationship-object>
    </template>

    <template if:true={errorMessage}>
        <div style="display: flex; align-items: baseline">
            <div style="width: 1px; flex-grow: 1"></div>
            <div class="slds-form-element__helper slds-has-error slds-p-bottom_medium">
                <div class="slds-form-element__help">
                    {errorMessage}
                </div>
            </div>
            <div style="width: 1px; flex-grow: 1"></div>
        </div>
    </template>

</template>